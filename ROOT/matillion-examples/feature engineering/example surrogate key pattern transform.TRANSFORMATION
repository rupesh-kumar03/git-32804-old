{"job":{"components":{"1141":{"id":1141,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":445,"y":295,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[1167],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1142":{"id":1142,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1949249710,"x":568,"y":287,"width":32,"height":32,"inputConnectorIDs":[1167],"outputConnectorIDs":[1160,1169],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Replicate 0"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1143":{"id":1143,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":738944574,"x":496,"y":80,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[1158],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Fixed Flow 0"}}}},"visible":true},"2":{"slot":2,"name":"Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"20"},"4":{"slot":4,"type":"INTEGER","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"20"},"4":{"slot":4,"type":"INTEGER","value":""}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"40"},"4":{"slot":4,"type":"INTEGER","value":""}}}},"visible":true},"3":{"slot":3,"name":"Values","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AAA"},"2":{"slot":2,"type":"STRING","value":"x"},"3":{"slot":3,"type":"STRING","value":"somevalue"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"New"},"2":{"slot":2,"type":"STRING","value":"1"},"3":{"slot":3,"type":"STRING","value":"new value"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"New"},"2":{"slot":2,"type":"STRING","value":"2"},"3":{"slot":3,"type":"STRING","value":"another new value"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1144":{"id":1144,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":704,"y":224,"width":32,"height":32,"inputConnectorIDs":[1169],"outputConnectorIDs":[1157],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Business Key"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"3":{"slot":3,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1145":{"id":1145,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":832,"y":160,"width":32,"height":32,"inputConnectorIDs":[1157,1158],"outputConnectorIDs":[1156],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join 0"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Fixed Flow 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Business Key"},"2":{"slot":2,"type":"STRING","value":"e"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"n\".\"bus_key_part1\" = \"e\".\"bus_key_part1\"\nAND \"n\".\"bus_key_part2\" = \"e\".\"bus_key_part2\""},"2":{"slot":2,"type":"STRING","value":"n_Left_e"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"n.some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"e.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"existing_bus_key_part1"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"e.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"existing_bus_key_part2"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1146":{"id":1146,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1760161015,"x":939,"y":155,"width":32,"height":32,"inputConnectorIDs":[1156],"outputConnectorIDs":[1159],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Filter 0"}}}},"visible":true},"2":{"slot":2,"name":"Filter Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"existing_bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Null"},"4":{"slot":4,"type":"STRING","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"existing_bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Null"},"4":{"slot":4,"type":"STRING","value":""}}}},"visible":true},"3":{"slot":3,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1147":{"id":1147,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1056,"y":160,"width":32,"height":32,"inputConnectorIDs":[1159],"outputConnectorIDs":[1164],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 0"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"3":{"slot":3,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1148":{"id":1148,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1701703136,"x":832,"y":352,"width":32,"height":32,"inputConnectorIDs":[1160],"outputConnectorIDs":[1162],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Max SK"}}}},"visible":true},"2":{"slot":2,"name":"Groupings","elements":{},"visible":true},"3":{"slot":3,"name":"Aggregations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"Max"}}}},"visible":true},"4":{"slot":4,"name":"Grouping Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Group By"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1149":{"id":1149,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":944,"y":352,"width":32,"height":32,"inputConnectorIDs":[1162],"outputConnectorIDs":[1168],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Handle NULL"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"COALESCE(\"max_sk\", 0)"},"2":{"slot":2,"type":"STRING","value":"sk_base"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1150":{"id":1150,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":2139809017,"x":1165,"y":155,"width":32,"height":32,"inputConnectorIDs":[1164],"outputConnectorIDs":[1166],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"2":{"slot":2,"name":"Include input columns.","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Partition Data","elements":{},"visible":true},"4":{"slot":4,"name":"Ordering within partitions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"Asc"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"Asc"}}}},"visible":true},"5":{"slot":5,"name":"Functions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Row Number"},"2":{"slot":2,"type":"STRING","value":"rowseq"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1152":{"id":1152,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":1296,"y":224,"width":32,"height":32,"inputConnectorIDs":[1166,1168],"outputConnectorIDs":[1161],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join for new SK baseline"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Handle NULL"},"2":{"slot":2,"type":"STRING","value":"baseline"},"3":{"slot":3,"type":"STRING","value":"Inner"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"1 = 1"},"2":{"slot":2,"type":"STRING","value":"n_Inner_baseline"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"n.some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"n.rowseq"},"2":{"slot":2,"type":"STRING","value":"rowseq"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"baseline.sk_base"},"2":{"slot":2,"type":"STRING","value":"sk_base"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1153":{"id":1153,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1408,"y":224,"width":32,"height":32,"inputConnectorIDs":[1161],"outputConnectorIDs":[1163],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add SK"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"sk_base\" + \"rowseq\""},"2":{"slot":2,"type":"STRING","value":"sk"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1154":{"id":1154,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1520,"y":224,"width":32,"height":32,"inputConnectorIDs":[1163],"outputConnectorIDs":[1165],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 1"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"3":{"slot":3,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"1155":{"id":1155,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":211954775,"x":1664,"y":224,"width":32,"height":32,"inputConnectorIDs":[1165],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example 0"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"5":{"slot":5,"name":"Truncate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Append"}}}},"visible":true},"200":{"slot":200,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"201":{"slot":201,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"202":{"slot":202,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"203":{"slot":203,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"204":{"slot":204,"name":"Order By","elements":{},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"1156":{"id":1156,"sourceID":1145,"targetID":1146},"1157":{"id":1157,"sourceID":1144,"targetID":1145},"1158":{"id":1158,"sourceID":1143,"targetID":1145},"1159":{"id":1159,"sourceID":1146,"targetID":1147},"1160":{"id":1160,"sourceID":1142,"targetID":1148},"1161":{"id":1161,"sourceID":1152,"targetID":1153},"1162":{"id":1162,"sourceID":1148,"targetID":1149},"1163":{"id":1163,"sourceID":1153,"targetID":1154},"1164":{"id":1164,"sourceID":1147,"targetID":1150},"1165":{"id":1165,"sourceID":1154,"targetID":1155},"1166":{"id":1166,"sourceID":1150,"targetID":1152},"1167":{"id":1167,"sourceID":1141,"targetID":1142},"1168":{"id":1168,"sourceID":1149,"targetID":1152},"1169":{"id":1169,"sourceID":1142,"targetID":1144}},"notes":{"1134":{"id":1134,"x":360,"y":231,"width":257,"height":121,"text":"Existing data","colour":"00ce4f"},"1135":{"id":1135,"x":360,"y":23,"width":257,"height":121,"text":"New data","colour":"00ce4f"},"1136":{"id":1136,"x":786,"y":82,"width":216,"height":137,"text":"This is an anti-join.\nIt removes any new data where the business key already exists.","colour":"00ce4f"},"1137":{"id":1137,"x":786,"y":264,"width":216,"height":137,"text":"This generates the starting value for new surrogate keys, by finding the highest one that already exists","colour":"00ce4f"},"1138":{"id":1138,"x":1235,"y":151,"width":323,"height":132,"text":"Generate new SKs","colour":"00ce4f"},"1139":{"id":1139,"x":1576,"y":150,"width":172,"height":132,"text":"Append","colour":"00ce4f"},"1140":{"id":1140,"x":1115,"y":376,"width":693,"height":118,"text":"This job is an example of data having \"state\".\n\n- When you run it for the **first** time, two new records will be added.\n- When you run it a **subsequent** time, there is nothing more to add\n\nMore details at [[https://www.matillion.com/resources/developer-relations/data-has-state-data-functions-and-design-patterns]]","colour":"e6e63c"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"name":"example surrogate key pattern transform","description":"Demonstrates the surrogate key generator pattern","type":"TRANSFORMATION","tag":"ccfd21aa-5d19-4b59-bdcc-337e6e0adcdd"}}